[tox]
envlist = py313,py314,py314-freethreaded
skipsdist = False

[testenv]
deps =
    pytest>=7.0
    pytest-cov>=4.0
    pytest-benchmark>=5.1.0
commands =
    pytest tests/ {posargs}

[testenv:py313]
basepython = python3.13
description = Test with Python 3.13

[testenv:py314]
basepython = python3.14
description = Test with Python 3.14

[testenv:py314-freethreaded]
basepython = python3.14t
description = Test with Python 3.14 free-threading build
setenv =
    PYTHON_GIL = 0
passenv =
    CUDA_VISIBLE_DEVICES
    POLARS_GPU_ENABLED

[testenv:benchmark]
basepython = python3.14
commands =
    pytest benchmarks/ tests/ -k benchmark --benchmark-only
